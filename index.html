<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ª–µ—Å–æ –í—ã–±–æ—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 25px;
            color: #333;
        }

        .input-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        label {
            color: #555;
            font-size: 14px;
        }

        input {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #4a90e2;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        #spinBtn {
            background-color: #4a90e2;
            color: white;
        }

        #resetBtn {
            background-color: #f0f0f0;
            color: #333;
        }

        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .wheel-container {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto 30px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 4s cubic-bezier(0.2, 0.8, 0.3, 1);
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }

        .wheel-section {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            overflow: hidden;
            padding-left: 20px;
            text-align: center;
            border: none;
        }

        /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏ */
        .wheel-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 2px;
            height: 100%;
            background-color: white;
            z-index: 2;
        }

        .wheel-section:last-child::before {
            display: none;
        }

        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            z-index: 10;
        }

        .pointer:before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #ff4757;
        }

        .result {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #e9ecef;
        }

        .result h3 {
            color: #666;
            margin-bottom: 10px;
            font-size: 16px;
        }

        #resultText {
            font-size: 22px;
            color: #2d3436;
            font-weight: bold;
            min-height: 30px;
        }

        .spinning {
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.7; }
        }

        .history {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            max-height: 120px;
            overflow-y: auto;
        }

        .history h4 {
            color: #666;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .history-item {
            padding: 5px 10px;
            border-bottom: 1px solid #e9ecef;
            color: #666;
            font-size: 14px;
        }

        .spins-counter {
            text-align: center;
            margin-top: 15px;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé° –ö–æ–ª–µ—Å–æ –í—ã–±–æ—Ä–∞</h1>

        <div class="input-section">
            <div class="input-group">
                <label>–ü–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:</label>
                <input type="text" id="option1" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç">
            </div>
            <div class="input-group">
                <label>–í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:</label>
                <input type="text" id="option2" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç">
            </div>
            <div class="input-group">
                <label>–¢—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:</label>
                <input type="text" id="option3" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç">
            </div>
        </div>

        <div class="controls">
            <button id="spinBtn">–ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ</button>
            <button id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>

        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel" id="wheel"></div>
        </div>

        <div class="result">
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
            <div id="resultText">–í–≤–µ–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –∫—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ</div>
        </div>

        <div class="history">
            <h4>–ò—Å—Ç–æ—Ä–∏—è:</h4>
            <div id="historyList"></div>
        </div>

        <div class="spins-counter">
            <span id="spinsCount">–í—Ä–∞—â–µ–Ω–∏–π: 0</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const wheel = document.getElementById('wheel');
            const spinBtn = document.getElementById('spinBtn');
            const resetBtn = document.getElementById('resetBtn');
            const resultText = document.getElementById('resultText');
            const historyList = document.getElementById('historyList');
            const spinsCountElement = document.getElementById('spinsCount');

            const option1Input = document.getElementById('option1');
            const option2Input = document.getElementById('option2');
            const option3Input = document.getElementById('option3');

            let spinsCount = 0;
            let isSpinning = false;
            let currentRotation = 0;

            const colors = ['#4a90e2', '#50c878', '#ffa500'];

            function initializeWheel() {
                wheel.innerHTML = '';
                const options = [
                    option1Input.value || "–í–∞—Ä–∏–∞–Ω—Ç 1",
                    option2Input.value || "–í–∞—Ä–∏–∞–Ω—Ç 2",
                    option3Input.value || "–í–∞—Ä–∏–∞–Ω—Ç 3"
                ];

                options.forEach((option, index) => {
                    const section = document.createElement('div');
                    section.className = 'wheel-section';

                    const text = option.length > 12 ? option.substring(0, 12) + '...' : option;
                    const textSpan = document.createElement('span');
                    textSpan.textContent = text;
                    textSpan.style.transform = `rotate(60deg)`;
                    textSpan.style.display = 'block';
                    textSpan.style.transformOrigin = '0 0';
                    textSpan.style.position = 'absolute';
                    textSpan.style.left = '50%';
                    textSpan.style.top = '10px';
                    textSpan.style.width = '100px';

                    section.appendChild(textSpan);
                    section.style.backgroundColor = colors[index];

                    const angle = 120 * index;
                    section.style.transform = `rotate(${angle}deg)`;

                    wheel.appendChild(section);
                });
            }

            function spinWheel() {
                if (isSpinning) return;

                const options = [
                    option1Input.value || "–í–∞—Ä–∏–∞–Ω—Ç 1",
                    option2Input.value || "–í–∞—Ä–∏–∞–Ω—Ç 2",
                    option3Input.value || "–í–∞—Ä–∏–∞–Ω—Ç 3"
                ];

                if (!options[0]) {
                    resultText.textContent = "–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç";
                    return;
                }

                isSpinning = true;
                spinBtn.disabled = true;
                spinBtn.classList.add('spinning');
                resultText.textContent = "–ö—Ä—É—Ç–∏–º...";

                // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
                // –ü–µ—Ä–≤—ã–π —Å–µ–∫—Ç–æ—Ä –∑–∞–Ω–∏–º–∞–µ—Ç —É–≥–ª—ã –æ—Ç 0 –¥–æ 120 –≥—Ä–∞–¥—É—Å–æ–≤
                // –°—Ç—Ä–µ–ª–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–≤–µ—Ä—Ö—É (90 –≥—Ä–∞–¥—É—Å–æ–≤)
                // –ß—Ç–æ–±—ã —Å—Ç—Ä–µ–ª–∫–∞ —É–∫–∞–∑—ã–≤–∞–ª–∞ –Ω–∞ —Ü–µ–Ω—Ç—Ä –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞,
                // –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã —Å–µ–∫—Ç–æ—Ä –±—ã–ª –ø–æ–≤–µ—Ä–Ω—É—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –µ–≥–æ —Å–µ—Ä–µ–¥–∏–Ω–∞ (60 –≥—Ä–∞–¥—É—Å–æ–≤)
                // –æ–∫–∞–∑–∞–ª–∞—Å—å –≤ –ø–æ–ª–æ–∂–µ–Ω–∏–∏ 90 –≥—Ä–∞–¥—É—Å–æ–≤ (–≥–¥–µ —Å—Ç—Ä–µ–ª–∫–∞)

                // –¢–µ–∫—É—â–∏–π —É–≥–æ–ª –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
                const currentFirstSectorAngle = currentRotation % 360;

                // –£–≥–æ–ª, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å, —á—Ç–æ–±—ã –ø–µ—Ä–≤—ã–π —Å–µ–∫—Ç–æ—Ä –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π
                // –ú—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —Å–µ—Ä–µ–¥–∏–Ω–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ (60 –≥—Ä–∞–¥—É—Å–æ–≤) –±—ã–ª–∞ –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π (90 –≥—Ä–∞–¥—É—Å–æ–≤)
                // –†–∞–∑–Ω–∏—Ü–∞: 90 - 60 = 30 –≥—Ä–∞–¥—É—Å–æ–≤
                // –ù–æ –ø–æ—Å–∫–æ–ª—å–∫—É –≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ, –∞ CSS –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤,
                // –Ω—É–∂–Ω–æ —ç—Ç–æ —É—á–∏—Ç—ã–≤–∞—Ç—å

                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏
                const fullRotations = 5 + Math.floor(Math.random() * 3);

                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª —Ç–∞–∫, —á—Ç–æ–±—ã –ø–µ—Ä–≤—ã–π —Å–µ–∫—Ç–æ—Ä –±—ã–ª –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π
                // –ü–æ–∑–∏—Ü–∏—è —Å–µ—Ä–µ–¥–∏–Ω—ã –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ –ø–æ—Å–ª–µ –≤—Ä–∞—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 90 –≥—Ä–∞–¥—É—Å–æ–≤
                // currentRotation + finalAngle –¥–æ–ª–∂–Ω–æ –¥–∞–≤–∞—Ç—å —É–≥–æ–ª, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º
                // (60 + currentRotation + finalAngle) % 360 = 90

                // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç: –Ω–∞—á–∏–Ω–∞–µ–º —Å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ
                // —Ç–∞–∫, —á—Ç–æ–±—ã –∑–∞–∫–æ–Ω—á–∏—Ç—å –≤ –ø–æ–∑–∏—Ü–∏–∏, –≥–¥–µ –ø–µ—Ä–≤—ã–π —Å–µ–∫—Ç–æ—Ä –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π
                const targetRelativeAngle = 90 - 60; // 30 –≥—Ä–∞–¥—É—Å–æ–≤

                // –ù–æ –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤
                const totalRotation = fullRotations * 360 + targetRelativeAngle;

                // –í—ã—á–∏—Å–ª—è–µ–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è
                const additionalRotation = totalRotation - (currentRotation % 360);

                const finalRotation = currentRotation + additionalRotation;

                // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ
                wheel.style.transform = `rotate(${finalRotation}deg)`;
                currentRotation = finalRotation;

                // –°–∏–º—É–ª—è—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—Ä–∞—â–µ–Ω–∏—è
                setTimeout(() => {
                    const selectedOption = options[0];

                    resultText.textContent = selectedOption;

                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    const now = new Date();
                    const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                    historyItem.textContent = `${time}: ${selectedOption}`;
                    historyList.prepend(historyItem);

                    spinsCount++;
                    spinsCountElement.textContent = `–í—Ä–∞—â–µ–Ω–∏–π: ${spinsCount}`;

                    isSpinning = false;
                    spinBtn.disabled = false;
                    spinBtn.classList.remove('spinning');

                    resultText.style.color = '#4a90e2';
                    resultText.style.fontWeight = 'bold';
                    setTimeout(() => {
                        resultText.style.color = '#2d3436';
                    }, 1000);

                }, 4000);
            }

            function resetWheel() {
                wheel.style.transform = 'rotate(0deg)';
                currentRotation = 0;
                resultText.textContent = '–í–≤–µ–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –∫—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ';
                resultText.style.color = '#2d3436';
                resultText.style.fontWeight = 'normal';
                initializeWheel();
            }

            spinBtn.addEventListener('click', spinWheel);
            resetBtn.addEventListener('click', resetWheel);

            [option1Input, option2Input, option3Input].forEach(input => {
                input.addEventListener('input', initializeWheel);
            });

            initializeWheel();
        });
    </script>
</body>
</html>
